# ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°æ™ºèƒ½æ—…è¡Œè§„åˆ’ç³»ç»Ÿçš„æŠ€æœ¯æ¶æ„ã€è®¾è®¡ç†å¿µå’Œæ ¸å¿ƒç»„ä»¶ã€‚

**æ–‡æ¡£ç‰ˆæœ¬**: V1.0  
**æœ€åæ›´æ–°**: 2025-10-10  
**å¯¹åº”ç³»ç»Ÿç‰ˆæœ¬**: V3.4

---

## ğŸ¯ æ¶æ„è®¾è®¡ç†å¿µ

### 1. è®¾è®¡åŸåˆ™

| åŸåˆ™ | è¯´æ˜ | ä½“ç° |
|------|------|------|
| **è§£è€¦** | å‰åç«¯åˆ†ç¦» | RESTful API |
| **æ¨¡å—åŒ–** | åŠŸèƒ½ç‹¬ç«‹å°è£… | Serviceså±‚è®¾è®¡ |
| **å¯æ‰©å±•** | æ˜“äºæ·»åŠ æ–°åŠŸèƒ½ | Pluginæ¶æ„ |
| **é«˜æ€§èƒ½** | å¿«é€Ÿå“åº”ç”¨æˆ· | ç¼“å­˜+å¼‚æ­¥ |
| **å¯è§‚æµ‹** | å®æ—¶ç›‘æ§ | æ€§èƒ½ç»Ÿè®¡API |

### 2. æŠ€æœ¯é€‰å‹

#### åç«¯é€‰å‹

**FastAPI (Python 3.13)**

âœ… **é€‰æ‹©ç†ç”±**:
- é«˜æ€§èƒ½: åŸºäºStarlette + Uvicorn,æ€§èƒ½æ¥è¿‘NodeJS
- ç±»å‹å®‰å…¨: Pydanticæ•°æ®éªŒè¯
- è‡ªåŠ¨æ–‡æ¡£: Swagger UI / ReDocè‡ªåŠ¨ç”Ÿæˆ
- å¼‚æ­¥æ”¯æŒ: async/awaitåŸç”Ÿæ”¯æŒ
- ç°ä»£åŒ–: Python 3.13æœ€æ–°ç‰¹æ€§

âŒ **å¤‡é€‰æ–¹æ¡ˆ**:
- Flask: è½»é‡ä½†æ€§èƒ½è¾ƒä½
- Django: è¿‡äºé‡é‡çº§
- NodeJS: å›¢é˜Ÿä¸ç†Ÿæ‚‰

#### å‰ç«¯é€‰å‹

**Vue 3 + TypeScript**

âœ… **é€‰æ‹©ç†ç”±**:
- æ¸è¿›å¼: æ˜“å­¦æ˜“ç”¨,çµæ´»æ€§é«˜
- Composition API: æ›´å¥½çš„ä»£ç ç»„ç»‡
- TypeScript: ç±»å‹å®‰å…¨,å‡å°‘bug
- ç”Ÿæ€ä¸°å¯Œ: Element Plusç­‰æˆç†Ÿç»„ä»¶åº“
- æ€§èƒ½ä¼˜ç§€: Virtual DOMä¼˜åŒ–

âŒ **å¤‡é€‰æ–¹æ¡ˆ**:
- React: å­¦ä¹ æ›²çº¿è¾ƒé™¡
- Angular: è¿‡äºå¤æ‚

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·æµè§ˆå™¨                           â”‚
â”‚                    (Vue 3 + TypeScript)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ HTTP/SSE
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API Gateway                           â”‚
â”‚                     (FastAPI)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Agent     â”‚  â”‚   æ™¯ç‚¹/è·¯çº¿  â”‚  â”‚   è¡Œç¨‹ç®¡ç†   â”‚    â”‚
â”‚  â”‚   API       â”‚  â”‚    API      â”‚  â”‚    API      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         â”‚          â”‚              â”‚
        â–¼         â–¼          â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent   â”‚ â”‚   Map    â”‚ â”‚  Route   â”‚ â”‚   Trip   â”‚
â”‚ Service  â”‚ â”‚ Service  â”‚ â”‚ Planner  â”‚ â”‚ Service  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚           â”‚            â”‚            â”‚
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
      â”‚  â”‚                               â”‚  â”‚
      â–¼  â–¼                               â–¼  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DeepSeek   â”‚                  â”‚  SQLite DB  â”‚
â”‚   LLM API   â”‚                  â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é«˜å¾·åœ°å›¾   â”‚
â”‚   v5 API    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æ ¸å¿ƒç»„ä»¶

### 1. Agent Service (æ™ºèƒ½ä½“æœåŠ¡)

#### æ¶æ„è®¾è®¡

```python
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       TravelPlannerAgent                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Attributes:                                â”‚
â”‚  - llm: ChatOpenAI                          â”‚
â”‚  - tools: List[Tool]                        â”‚
â”‚  - agent: AgentExecutor                     â”‚
â”‚  - chat_history: List[Message]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Methods:                                   â”‚
â”‚  + chat(user_input) -> Dict                 â”‚
â”‚  + chat_stream(user_input) -> AsyncGen      â”‚
â”‚  - _create_tools() -> List[Tool]            â”‚
â”‚  - _create_agent() -> AgentExecutor         â”‚
â”‚  - _estimate_max_iterations(input) -> int   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ReActå¾ªç¯

```
ç”¨æˆ·è¾“å…¥: "æˆ‘æƒ³å»åŒ—äº¬ç©3å¤©"
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Thought: æˆ‘éœ€è¦æœç´¢åŒ—äº¬çš„æ™¯ç‚¹      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Action: search_attractions          â”‚
â”‚  Action Input: {                     â”‚
â”‚    "city": "åŒ—äº¬",                   â”‚
â”‚    "keyword": "æ™¯ç‚¹",                â”‚
â”‚    "limit": 10                       â”‚
â”‚  }                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Observation: [æ•…å®«, å¤©å®‰é—¨, ...]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Thought: æˆ‘éœ€è¦ä¼˜åŒ–è¿™äº›æ™¯ç‚¹çš„é¡ºåº  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Action: optimize_route              â”‚
â”‚  ...                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å·¥å…·ç³»ç»Ÿ

```python
Tool æ¶æ„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Tool                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - name: str                             â”‚
â”‚  - description: str                      â”‚
â”‚  - func: Callable                        â”‚
â”‚  - coroutine: Callable (async)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

8ä¸ªå¯ç”¨å·¥å…·:
1. search_attractions - POIæœç´¢
2. calculate_route - è·¯çº¿è§„åˆ’
3. optimize_route - TSPä¼˜åŒ–
4. search_hotels - é…’åº—æœç´¢
5. get_weather - å¤©æ°”æŸ¥è¯¢
6. get_multi_weather - æ‰¹é‡å¤©æ°”(å¹¶è¡Œ)
7. search_food - ç¾é£Ÿæ¨è
8. get_city_info - åŸå¸‚ä¿¡æ¯
```

### 2. Map Service (åœ°å›¾æœåŠ¡)

#### æœåŠ¡æ¶æ„

```python
class MapService:
    # æ ¸å¿ƒæ–¹æ³•
    - search_attractions_v5()    # POIæœç´¢2.0
    - get_route_v5()             # è·¯å¾„è§„åˆ’2.0
    - get_input_tips()           # è¾“å…¥æç¤º
    - search_around()            # å‘¨è¾¹æœç´¢
    - get_poi_detail()           # POIè¯¦æƒ…
    - get_weather()              # å¤©æ°”æŸ¥è¯¢
    - get_location_by_ip()       # IPå®šä½
    
    # å·¥å…·æ–¹æ³•
    - calculate_distance()       # Haversineè·ç¦»
    - _parse_pois_v5()          # æ•°æ®è§£æ
```

#### é«˜å¾·APIè°ƒç”¨æµç¨‹

```
ç”¨æˆ·æœç´¢ "åŒ—äº¬ æ•…å®«"
    â”‚
    â–¼
search_attractions_v5(
    keywords="æ•…å®«",
    region="åŒ—äº¬",
    types="110000",
    city_limit=True
)
    â”‚
    â–¼
é«˜å¾·POIæœç´¢v5 API
    â”‚
    â–¼
è¿”å›æ•°æ® (JSON):
{
  "pois": [
    {
      "id": "B001D0DH23",
      "name": "æ•…å®«åšç‰©é™¢",
      "location": "116.397,39.918",
      "business": {
        "rating": "4.8",
        "cost": "60",
        "tel": "010-85007421"
      }
    }
  ]
}
    â”‚
    â–¼
æ•°æ®è§£æå’Œæ ¼å¼åŒ–
    â”‚
    â–¼
è¿”å›æ ‡å‡†åŒ–æ•°æ®
```

### 3. Route Planner (è·¯å¾„è§„åˆ’æœåŠ¡)

#### TSPä¼˜åŒ–æµç¨‹

```
è¾“å…¥: 6ä¸ªæ™¯ç‚¹çš„åæ ‡
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. æ„å»ºè·ç¦»çŸ©é˜µ (6x6)          â”‚
â”‚     ä½¿ç”¨Haversineå…¬å¼           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. åˆ›å»ºOR-Toolsè·¯ç”±æ¨¡å‹        â”‚
â”‚     - RoutingIndexManager       â”‚
â”‚     - RoutingModel              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. è®¾ç½®æœç´¢å‚æ•°                â”‚
â”‚     - PATH_CHEAPEST_ARC         â”‚
â”‚     - GUIDED_LOCAL_SEARCH       â”‚
â”‚     - time_limit: 10ç§’          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. æ±‚è§£TSP                     â”‚
â”‚     è¿”å›æœ€ä¼˜è®¿é—®é¡ºåº            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. æå–è·¯å¾„                    â”‚
â”‚     [0 â†’ 3 â†’ 1 â†’ 5 â†’ 2 â†’ 4]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### äº¤é€šæ–¹å¼é€‰æ‹©é€»è¾‘

```python
def _decide_transport_mode(distance, budget_tight):
    if distance < 2000:           # <2km
        return "walking"
    elif distance < 5000:         # 2-5km
        if budget_tight:
            return "transit"      # å…¬äº¤
        else:
            return "driving"      # å‡ºç§Ÿè½¦
    elif distance < 10000:        # 5-10km
        if budget_tight:
            return "transit"      # åœ°é“
        else:
            return "driving"
    else:                         # >10km
        if budget_tight:
            return "transit"      # åœ°é“/å…¬äº¤
        else:
            return "driving"      # å‡ºç§Ÿè½¦
```

### 4. æ€§èƒ½ä¼˜åŒ–ç»„ä»¶

#### ç¼“å­˜ç³»ç»Ÿ

```python
class InMemoryCache:
    """å†…å­˜ç¼“å­˜å®ç°"""
    
    def __init__(self, ttl=3600):
        self._cache = {}       # æ•°æ®å­˜å‚¨
        self._timestamps = {}  # æ—¶é—´æˆ³
        self._ttl = ttl        # è¿‡æœŸæ—¶é—´
    
    def get(key):
        # æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
        if key in self._timestamps:
            if time.time() - self._timestamps[key] > self._ttl:
                self.delete(key)
                return None
        return self._cache.get(key)
    
    def set(key, value):
        # é™åˆ¶ç¼“å­˜å¤§å°
        if len(self._cache) > 1000:
            self._cleanup_oldest(100)
        
        self._cache[key] = value
        self._timestamps[key] = time.time()
```

#### é‡è¯•æœºåˆ¶

```python
async def retry_with_backoff(
    func,
    max_retries=3,
    initial_delay=1.0,
    backoff_factor=2.0
):
    """æŒ‡æ•°é€€é¿é‡è¯•"""
    
    for attempt in range(max_retries + 1):
        try:
            return await func()
        except Exception as e:
            if attempt < max_retries:
                delay = initial_delay * (backoff_factor ** attempt)
                await asyncio.sleep(delay)
            else:
                raise
```

---

## ğŸ“Š æ•°æ®æµ

### 1. AIç”Ÿæˆè¡Œç¨‹æµç¨‹

```
ç”¨æˆ·è¾“å…¥
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯: è¡¨å•æ•°æ®æ”¶é›†                 â”‚
â”‚  - destination, days, budget        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ HTTP POST
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åç«¯API: /agent/enhanced-stream   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent Service: chat_stream()       â”‚
â”‚  - åŠ¨æ€è®¡ç®—max_iterations           â”‚
â”‚  - åˆ›å»ºAgentæ‰§è¡Œå™¨                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ReActå¾ªç¯å¼€å§‹                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. Thought: åˆ†æéœ€æ±‚         â”‚  â”‚
â”‚  â”‚ 2. Action: search_attractionsâ”‚  â”‚
â”‚  â”‚ 3. Observation: [æ™¯ç‚¹åˆ—è¡¨]   â”‚  â”‚
â”‚  â”‚ 4. Thought: éœ€è¦ä¼˜åŒ–é¡ºåº     â”‚  â”‚
â”‚  â”‚ 5. Action: optimize_route    â”‚  â”‚
â”‚  â”‚ 6. Observation: [ä¼˜åŒ–ç»“æœ]   â”‚  â”‚
â”‚  â”‚ ...                          â”‚  â”‚
â”‚  â”‚ N. Final Answer: å®Œæ•´è¡Œç¨‹    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ SSE Stream
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯: å®æ—¶æ˜¾ç¤º                     â”‚
â”‚  - æ€è€ƒè¿‡ç¨‹                         â”‚
â”‚  - å·¥å…·è°ƒç”¨                         â”‚
â”‚  - æœ€ç»ˆè¡Œç¨‹                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æ‰‹åŠ¨ä¼˜åŒ–æµç¨‹

```
ç”¨æˆ·æ‹–æ‹½æ™¯ç‚¹
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯: æ›´æ–°PiniaçŠ¶æ€                â”‚
â”‚  - currentDay.attractions.push()    â”‚
â”‚  - ä¿å­˜å†å²å¿«ç…§ (æ’¤é”€/é‡åš)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
ç‚¹å‡»"æ™ºèƒ½ä¼˜åŒ–"æŒ‰é’®
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åç«¯API: POST /trips/{id}/optimizeâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Route Planner: optimize_route()    â”‚
â”‚  - æ„å»ºè·ç¦»çŸ©é˜µ                     â”‚
â”‚  - OR-Toolsæ±‚è§£TSP                  â”‚
â”‚  - è¿”å›ä¼˜åŒ–é¡ºåº                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯: æ›´æ–°UI                       â”‚
â”‚  - é‡æ–°æ’åºæ™¯ç‚¹å¡ç‰‡                 â”‚
â”‚  - æ›´æ–°åœ°å›¾è·¯çº¿                     â”‚
â”‚  - æ˜¾ç¤ºä¼˜åŒ–ç‡                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”’ å®‰å…¨è®¾è®¡

### 1. APIå®‰å…¨

```python
# CORSé…ç½®
app.add_middleware(
    CORSMiddleware,
    allow_origins=settings.BACKEND_CORS_ORIGINS,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"]
)

# æœªæ¥å¯æ·»åŠ :
# - JWTè®¤è¯
# - Rate Limiting
# - API KeyéªŒè¯
```

### 2. æ•°æ®éªŒè¯

```python
# Pydanticæ¨¡å‹è‡ªåŠ¨éªŒè¯
class TripCreate(BaseModel):
    title: str = Field(..., min_length=1, max_length=100)
    destination: str = Field(..., min_length=1)
    days: int = Field(..., ge=1, le=30)
    budget: float = Field(..., ge=0)
```

### 3. é”™è¯¯å¤„ç†

```python
@app.exception_handler(Exception)
async def global_exception_handler(request, exc):
    return JSONResponse(
        status_code=500,
        content={"detail": "Internal Server Error"}
    )
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. ç¼“å­˜ç­–ç•¥

| æ•°æ®ç±»å‹ | ç¼“å­˜æ—¶é—´ | ç†ç”± |
|---------|---------|------|
| POIæœç´¢ç»“æœ | 1å°æ—¶ | æ™¯ç‚¹æ•°æ®å˜åŒ–æ…¢ |
| å¤©æ°”æ•°æ® | 1å°æ—¶ | å¤©æ°”æ›´æ–°é¢‘ç‡ä¸ºå°æ—¶ |
| è·¯çº¿è§„åˆ’ | 30åˆ†é’Ÿ | è·¯å†µå¯èƒ½å˜åŒ– |
| AIå¯¹è¯ | ä¸ç¼“å­˜ | ä¸ªæ€§åŒ–å†…å®¹ |

### 2. å¼‚æ­¥å¤„ç†

```python
# å¹¶è¡ŒæŸ¥è¯¢å¤šä¸ªåŸå¸‚å¤©æ°”
async def get_multi_weather(cities):
    tasks = [get_weather(city) for city in cities]
    results = await asyncio.gather(*tasks)
    return results
```

### 3. æ•°æ®åº“ä¼˜åŒ–

```python
# ç´¢å¼•ä¼˜åŒ–
class Trip(Base):
    __tablename__ = "trips"
    
    id = Column(Integer, primary_key=True, index=True)
    destination = Column(String, index=True)  # ç»å¸¸æŸ¥è¯¢
    created_at = Column(DateTime, index=True)  # æ’åºå­—æ®µ
```

---

## ğŸš€ æ‰©å±•æ€§è®¾è®¡

### 1. å·¥å…·æ‰©å±•

æ·»åŠ æ–°å·¥å…·åªéœ€3æ­¥:

```python
# 1. å®šä¹‰å·¥å…·å‡½æ•°
async def new_tool_func(param: str) -> str:
    """æ–°å·¥å…·çš„åŠŸèƒ½æè¿°"""
    # å®ç°é€»è¾‘
    return result

# 2. åŒ…è£…ä¸ºTool
new_tool = Tool(
    name="new_tool",
    func=wrapped_new_tool,
    description="å·¥å…·æè¿°ï¼Œä¾›LLMç†è§£",
    coroutine=new_tool_func
)

# 3. æ·»åŠ åˆ°å·¥å…·åˆ—è¡¨
self.tools.append(new_tool)
```

### 2. APIæ‰©å±•

```python
# æ–°å¢è·¯ç”±æ¨¡å—
from app.api.v1 import new_module

api_router.include_router(
    new_module.router,
    prefix="/new",
    tags=["æ–°åŠŸèƒ½"]
)
```

### 3. æ•°æ®åº“æ‰©å±•

```python
# æ–°å¢æ•°æ®æ¨¡å‹
class NewModel(Base):
    __tablename__ = "new_table"
    # å­—æ®µå®šä¹‰...

# è‡ªåŠ¨åˆ›å»ºè¡¨
Base.metadata.create_all(bind=engine)
```

---

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

### 1. æ€§èƒ½ç›‘æ§

```python
# è®°å½•æ¯æ¬¡APIè°ƒç”¨
async def track_performance(operation, duration, success):
    monitor.record(
        operation=operation,
        duration=duration,
        success=success,
        timestamp=datetime.now()
    )

# æŸ¥è¯¢ç»Ÿè®¡
stats = monitor.get_stats()
# {
#   "total_calls": 150,
#   "success_rate": 98.5,
#   "avg_duration": 2.3
# }
```

### 2. æ—¥å¿—ç³»ç»Ÿ

```python
import logging

# ä¸åŒçº§åˆ«çš„æ—¥å¿—
logging.debug("è°ƒè¯•ä¿¡æ¯")
logging.info("è¿è¡Œä¿¡æ¯")
logging.warning("è­¦å‘Šä¿¡æ¯")
logging.error("é”™è¯¯ä¿¡æ¯")
```

---

## ğŸ”„ CI/CD (æœªæ¥è§„åˆ’)

### å»ºè®®çš„CI/CDæµç¨‹

```yaml
# .github/workflows/ci.yml
name: CI/CD

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Run Tests
        run: pytest
      
  build:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - name: Build Docker
        run: docker-compose build
      
  deploy:
    needs: build
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to Server
        run: ./deploy.sh
```

---

## ğŸ“š å‚è€ƒèµ„æ–™

### æŠ€æœ¯æ–‡æ¡£
- [FastAPIå®˜æ–¹æ–‡æ¡£](https://fastapi.tiangolo.com/)
- [Vue 3å®˜æ–¹æ–‡æ¡£](https://vuejs.org/)
- [LangChainæ–‡æ¡£](https://python.langchain.com/)
- [OR-Toolsæ–‡æ¡£](https://developers.google.com/optimization)
- [é«˜å¾·åœ°å›¾APIæ–‡æ¡£](https://lbs.amap.com/api/)

### è®¾è®¡æ¨¡å¼
- ReAct: Reasoning and Acting
- MCP: Model Context Protocol
- Repository Pattern
- Service Layer Pattern

---

## ğŸ“ è”ç³»æ–¹å¼

**æ¶æ„è´Ÿè´£äºº**: ViVi141  
**æ–‡æ¡£ç»´æŠ¤**: å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025-10-10

---

<div align="center">

**æœ¬æ–‡æ¡£æŒç»­æ›´æ–°ä¸­**

å¦‚æœ‰ç–‘é—®æˆ–å»ºè®®,æ¬¢è¿æäº¤Issue

</div>

